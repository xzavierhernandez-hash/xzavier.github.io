<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DemodHub ‚Äì Games | Proxy | AI | Rooms</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    :root{--bg:#0d0d1a;--panel:#151522;--glow:#00f2ff;--pink:#ff00e6}
    *{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    body{background:var(--bg);color:#fff;height:100vh;overflow:hidden;display:flex;flex-direction:column}
    @keyframes gradient{0%{background-position:0%}50%{background-position:100%}100%{background-position:0%}}
    .bg-anim{position:fixed;inset:0;z-index:-1;background:linear-gradient(45deg,var(--bg),#1a0033,var(--bg));background-size:400% 400%;animation:gradient 15s ease infinite}
    header{flex:0 0 60px;display:flex;align-items:center;justify-content:space-between;padding:0 1.5rem;background:var(--panel);border-bottom:1px solid var(--glow);box-shadow:0 0 15px var(--glow)}
    h1{font-size:1.8rem;background:linear-gradient(90deg,var(--glow),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    main{flex:1;display:flex;height:calc(100vh - 60px)}
    /* sidebar */
    aside{flex:0 0 220px;background:var(--panel);border-right:1px solid rgba(255,255,255,.08);padding:.75rem;display:flex;flex-direction:column;gap:.6rem}
    aside button{width:100%;padding:.6rem;border-radius:8px;border:1px solid transparent;background:rgba(0,0,0,.25);color:#fff;cursor:pointer;transition:.3s}
    aside button:hover{border-color:var(--glow);box-shadow:0 0 10px var(--glow)}
    aside button.active{background:var(--glow);color:#000;font-weight:700}
    /* content panes */
    .content{flex:1;padding:1rem;display:flex;flex-direction:column;gap:.75rem}
    .pane{display:none;flex:1;flex-direction:column;gap:.5rem}
    .pane.active{display:flex}
    .glass{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:.75rem;backdrop-filter:blur(6px)}
    input,textarea{width:100%;padding:.55rem .75rem;border-radius:6px;border:1px solid rgba(255,255,255,.15);background:rgba(0,0,0,.25);color:#fff;outline:none}
    input:focus,textarea:focus{border-color:var(--glow)}
    iframe{flex:1;width:100%;border:none;border-radius:8px}
    /* chat */
    #chatBox{flex:1;overflow-y:auto;padding:.5rem;font-size:.9rem;max-height:250px}
    .msg{margin:.2rem 0}
    /* utils */
    .row{display:flex;gap:.5rem}
    .row button{flex:1;padding:.5rem;border-radius:6px;border:1px solid var(--glow);background:transparent;color:var(--glow);cursor:pointer;transition:.3s}
    .row button:hover{background:var(--glow);color:#000}
  </style>
</head>
<body>
<div class="bg-anim"></div>
<header><h1>DemodHub</h1></header>

<main>
  <!-- SIDE BAR -->
  <aside>
    <button class="active" onclick="switchPane('games')">üéÆ Games</button>
    <button onclick="switchPane('proxy')">üåê Proxy</button>
    <button onclick="switchPane('rooms')">üí¨ Rooms</button>
    <button onclick="switchPane('ai')">ü§ñ AI Chat</button>
  </aside>

  <!-- CONTENT PANES -->
  <div class="content">
    <!-- 1. GAMES -->
    <div id="games" class="pane active">
      <div class="row">
        <input id="gameSearch" placeholder="Search games‚Ä¶">
        <button onclick="loadGames()">Search</button>
      </div>
      <div class="glass" style="flex:1"><iframe id="gameFrame" src=""></iframe></div>
    </div>

    <!-- 2. PROXY -->
    <div id="proxy" class="pane">
      <div class="row">
        <input id="proxyUrl" placeholder="https://example.com">
        <button onclick="loadProxy()">Go</button>
      </div>
      <div class="glass" style="flex:1"><iframe id="proxyFrame" src=""></iframe></div>
    </div>

    <!-- 3. ROOMS / CHAT -->
    <div id="rooms" class="pane">
      <div class="row">
        <input id="roomName" placeholder="room name">
        <button onclick="joinRoom()">Join / Create</button>
      </div>
      <div class="glass" style="flex:1;display:flex;flex-direction:column">
        <div id="chatBox"></div>
        <textarea id="chatInput" rows="2" placeholder="type here‚Ä¶"></textarea>
        <button onclick="sendChat()">Send</button>
      </div>
    </div>

    <!-- 4. AI CHAT -->
    <div id="ai" class="pane">
      <div class="glass" style="flex:1;display:flex;flex-direction:column">
        <div id="aiBox"></div>
        <textarea id="aiInput" rows="2" placeholder="ask AI anything‚Ä¶"></textarea>
        <button onclick="askAI()">Ask</button>
      </div>
    </div>
  </div>
</main>

<script>
/* ---------- pane switcher ---------- */
function switchPane(p){
  document.querySelectorAll('.pane').forEach(x=>x.classList.remove('active'));
  document.getElementById(p).classList.add('active');
  document.querySelectorAll('aside button').forEach(b=>b.classList.remove('active'));
  event.target.classList.add('active');
}
/* ---------- games ---------- */
function loadGames(){
  const q=document.getElementById('gameSearch').value.trim()||'crazy games unblocked';
  const url='https://www.crazygames.com/search?q='+encodeURIComponent(q);
  document.getElementById('gameFrame').src='https://api.allorigins.win/raw?url='+encodeURIComponent(url);
}
/* ---------- proxy ---------- */
function loadProxy(){
  let u=document.getElementById('proxyUrl').value.trim();
  if(!u) return;
  if(!u.match(/^https?:\/\//)) u='https://'+u;          // auto-fix
  document.getElementById('proxyFrame').src='https://api.allorigins.win/raw?url='+encodeURIComponent(u);
}
/* ---------- chat / rooms ---------- */
let ws, room='lobby';
function addMsg(box,text,who='system'){
  const d=document.createElement('div');d.className='msg';d.textContent='['+(who||'anon')+'] '+text;
  box.appendChild(d);box.scrollTop=box.scrollHeight;
}
function joinRoom(){
  const r=document.getElementById('roomName').value.trim()||'lobby';
  room=r; location.hash=r;
  document.getElementById('chatBox').innerHTML='';
  addMsg(document.getElementById('chatBox'),'joined room: '+r);
  // simple websocket relay (public demo server)
  if(ws) ws.close();
  ws=new WebSocket('wss://demos.yjs.dev/ws');
  ws.onopen=()=>ws.send(JSON.stringify({join:room}));
  ws.onmessage=e=>{
    const m=JSON.parse(e.data);
    if(m.room===room&&m.msg) addMsg(document.getElementById('chatBox'),m.msg,m.user);
  };
  ws.onclose=()=>addMsg(document.getElementById('chatBox'),'relay disconnected');
}
function sendChat(){
  const txt=document.getElementById('chatInput').value.trim(); if(!txt) return;
  addMsg(document.getElementById('chatBox'),txt,'you');
  if(ws&&ws.readyState===1) ws.send(JSON.stringify({room:room,msg:txt}));
  document.getElementById('chatInput').value='';
}
/* ---------- AI (free, no key) ---------- */
async function askAI(){
  const q=document.getElementById('aiInput').value.trim(); if(!q) return;
  addMsg(document.getElementById('aiBox'),q,'you');
  addMsg(document.getElementById('aiBox'),'‚Ä¶typing','AI');
  try{
    const res=await fetch('https://api-inference.huggingface.co/models/microsoft/DialoGPT-medium',{
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({inputs:q})
    }).then(r=>r.json());
    const ans=res?.generated_text||'no reply';
    document.getElementById('aiBox').lastChild.textContent='[AI] '+ans;
  }catch{document.getElementById('aiBox').lastChild.textContent='[AI] error'}
  document.getElementById('aiInput').value='';
}
/* ---------- starters ---------- */
window.onload=()=>{
  // pre-load a nice unblocked-games homepage
  document.getElementById('gameFrame').src='https://api.allorigins.win/raw?url='+encodeURIComponent('https://www.crazygames.com');
  joinRoom(); // auto-join default lobby
};
</script>
</body>
</html>
